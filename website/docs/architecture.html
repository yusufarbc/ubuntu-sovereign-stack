<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture - Ubuntu Sovereign Stack</title>
    <meta name="description" content="Documentation for Ubuntu Sovereign Stack - An open-source, on-premise enterprise architecture.">
    <meta name="author" content="Ubuntu Sovereign Stack Project">
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        /* Local overrides for docs readability */
        body {
            background-color: #f7f9fc;
        }
    </style>
</head>
<body>

    <!-- Global Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="brand">Ubuntu Sovereign Stack</a>
            <ul class="nav-links">
                <li><a href="../index.html" class="nav-link">Home</a></li>
                <li><a href="project_proposal.html" class="nav-link">Proposal</a></li>
                <li><a href="architecture.html" class="nav-link active">Architecture</a></li>
                <li><a href="tools.html" class="nav-link">Tools</a></li>
                <li><a href="background_cloud_first.html" class="nav-link">Background</a></li>
                <li><a href="comparative_analysis.html" class="nav-link">Comparative</a></li>
            </ul>
            <a href="https://github.com/yusufarbc/ubuntu-sovereign-stack" class="btn-github" target="_blank">
                GitHub &rarr;
            </a>
        </div>
    </nav>

    <div class="container">
        <div class="docs-content">
            <a href="index.html" class="nav-link" style="display:inline-block; margin-bottom:1rem; color:var(--primary); padding:0;">&larr; Back to Index</a>
            <h1>System Architecture</h1>
<h2>Overview</h2>
<p>The proposed architecture is a holistic <strong>On-Premise Sovereign Cloud</strong> built on <strong>Ubuntu Server LTS</strong>. It is designed to replace the traditional Microsoft ecosystem (Windows Server/Hyper-V/Active Directory) with a modern, container-based open-source stack.</p>
<h2>Physical Layer</h2>
<p>The foundation consists of <strong>3 Physical Servers</strong> configured as a High-Availability (HA) cluster:</p>
<ul>
<li>  <strong>Operating System:</strong> Ubuntu Server 22.04/24.04 LTS.</li>
<li>  <strong>Configuration:</strong> 1 Control Plane (Master) node, 2 Worker nodes (or 3 HA Master/Worker hybrid nodes for resilience).</li>
<li>  <strong>Networking:</strong> Private network segmentation behind a physical Firewall (e.g., pfSense/OPNsense) with strict egress rules.</li>
<li>  <strong>Storage:</strong> Local SSDs aggregated via <strong>Longhorn</strong> for distributed persistent block storage.</li>
</ul>
<h2>Orchestration Layer: Kubernetes &amp; Rancher</h2>
<p>Instead of legacy virtualization, the system uses <strong>Kubernetes (RKE2)</strong> managed by <strong>Rancher</strong>.</p>
<ul>
<li>  <strong>RKE2</strong>: Used for its FIPS compliance and secure-by-default configuration.</li>
<li>  <strong>Rancher:</strong> Provides the "Single Pane of Glass" for lifecycle management, RBAC, and workload visibility.</li>
<li>  <strong>Runtime:</strong> <strong>Podman</strong> is mandated as the container engine (Daemonless/Rootless) to mitigate security risks associated with the Docker daemon.</li>
</ul>
<h2>Logical Architecture &amp; Namespaces</h2>
<p>Services are logically isolated into Kubernetes Namespaces for security and resource management:</p>
<table>
<thead><tr>
<th>Namespace</th>
<th>Services</th>
<th>Role &amp; Configuration</th>
</tr></thead><tbody>
<tr>
<td><code>infrastructure</code></td>
<td><strong>Samba 4 AD</strong>&lt;br&gt;<strong>Authentik</strong></td>
<td><strong>Core Identity:</strong> AD serves as the "Source of Truth". Authentik syncs via LDAP to provide SSO (SAML/OIDC) and MFA.</td>
</tr>
<tr>
<td><code>collaboration</code></td>
<td><strong>Zimbra Suite</strong></td>
<td><strong>Business Apps:</strong> Email, Calendar, Contacts. Data persists on Longhorn volumes; secured by ClamAV/SpamAssassin.</td>
</tr>
<tr>
<td><code>security</code></td>
<td><strong>Wazuh Manager</strong></td>
<td><strong>Defensive Ops:</strong> Central SIEM for log correlation.</td>
</tr>
<tr>
<td><code>monitoring</code></td>
<td><strong>Prometheus</strong>&lt;br&gt;<strong>Grafana</strong></td>
<td><strong>Observability:</strong> Scrapes metrics from nodes/pods and visualizes them via accessible dashboards (e.g., <code>grafana.sovereign.lan</code>).</td>
</tr>
</tbody></table>
<h2>Networking &amp; Integration</h2>
<ul>
<li>  <strong>Ingress Controller</strong>: NGINX Ingress handles TLS termination and routing (Layer 7).</li>
<li>  <strong>Load Balancer</strong>: MetalLB provides Layer 2 IP assignment for the Ingress Controller.</li>
<li>  <strong>DNS Strategy</strong>: Split-DNS configuration where internal services (<code>*.sovereign.lan</code>) resolve to the MetalLB VIP.</li>
</ul>
<h2>Backup &amp; Disaster Recovery</h2>
<ul>
<li>  <strong>Strategy</strong>: 3-2-1 Rule.</li>
<li>  <strong>Implementation</strong>:</li>
<li>  <strong>Longhorn Snapshots</strong>: Instant recovery points for volumes.</li>
<li>  <strong>Velero</strong>: Backs up Kubernetes manifests to S3-compatible on-prem storage (e.g., MinIO or QNAP NAS).</li>
<li>  <strong>Physical NAS</strong>: QNAP device receives nightly cold storage dumps.</li>
</ul>
        </div>
    </div>

    <footer>
        <p>Ubuntu Sovereign Stack &copy; 2025. Project Documentation.</p>
    </footer>

</body>
</html>
